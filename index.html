<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å–¶æ¥­éƒ¨ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700;900&family=Inter:wght@400;600;800;900&display=swap');

  :root {
    --bg: #f5f0eb;
    --card: #ffffff;
    --text: #1a1a2e;
    --text-sub: #8b8b9e;
    --coral: #ff6b6b;
    --mint: #2dd4a8;
    --sky: #4da6ff;
    --violet: #8b5cf6;
    --amber: #f59e0b;
    --pink: #ec4899;
    --radius: 28px;
    --shadow: 0 4px 30px rgba(0,0,0,0.06);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Noto Sans JP', 'Inter', sans-serif;
    background: var(--bg);
    color: var(--text);
    overflow: hidden;
    width: 100vw;
    height: 100vh;
  }

  /* ========== ãƒ˜ãƒƒãƒ€ãƒ¼ ========== */
  .header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 18px 48px;
    height: 72px;
  }
  .header-left {
    display: flex;
    align-items: center;
    gap: 14px;
  }
  .header-logo {
    font-family: 'Inter', sans-serif;
    font-size: 22px;
    font-weight: 900;
    letter-spacing: -0.5px;
    color: var(--text);
  }
  .header-logo span {
    display: inline-block;
    background: linear-gradient(135deg, var(--coral), var(--pink));
    color: white;
    padding: 2px 10px;
    border-radius: 8px;
    margin-right: 6px;
    font-size: 18px;
  }
  .header-date {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-sub);
    background: var(--card);
    padding: 6px 16px;
    border-radius: 20px;
    box-shadow: var(--shadow);
  }
  .header-clock {
    font-family: 'Inter', sans-serif;
    font-size: 28px;
    font-weight: 900;
    letter-spacing: -1px;
    color: var(--text);
  }

  /* ========== ãƒ¡ã‚¤ãƒ³ ========== */
  .main {
    height: calc(100vh - 72px);
    padding: 0 48px 24px;
    display: flex;
    flex-direction: column;
  }

  /* ========== ã‚¹ãƒ©ã‚¤ãƒ‰ ========== */
  .slide-container {
    flex: 1;
    position: relative;
    overflow: hidden;
  }
  .slide {
    position: absolute;
    inset: 0;
    opacity: 0;
    transform: translateX(40px);
    transition: opacity 0.6s ease, transform 0.6s ease;
    pointer-events: none;
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 28px;
    padding: 10px 0;
  }
  .slide.active {
    opacity: 1;
    transform: translateX(0);
    pointer-events: auto;
  }

  /* ========== ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ ========== */
  .slide-indicators {
    display: flex;
    justify-content: center;
    gap: 8px;
    padding: 12px 0 4px;
  }
  .indicator {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: rgba(0,0,0,0.1);
    transition: all 0.4s ease;
    cursor: pointer;
  }
  .indicator.active {
    background: var(--coral);
    width: 32px;
    border-radius: 5px;
  }

  /* ========== ã‚¹ãƒ©ã‚¤ãƒ‰ãƒ©ãƒ™ãƒ« ========== */
  .slide-label {
    font-size: 15px;
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 4px;
    color: var(--text-sub);
  }

  /* ========== å¤§ããªæ•°å­— ========== */
  .big-number {
    font-family: 'Inter', sans-serif;
    font-weight: 900;
    line-height: 1;
    letter-spacing: -6px;
  }
  .big-number.huge {
    font-size: clamp(120px, 22vw, 260px);
  }
  .big-number.large {
    font-size: clamp(80px, 14vw, 160px);
  }
  .big-unit {
    font-size: 0.28em;
    font-weight: 700;
    letter-spacing: 0;
    opacity: 0.4;
    margin-left: 4px;
  }
  .big-sub {
    font-size: 20px;
    font-weight: 600;
    color: var(--text-sub);
    margin-top: 12px;
  }

  /* ========== ãƒãƒƒã‚¸ ========== */
  .badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 8px 20px;
    border-radius: 20px;
    font-size: 16px;
    font-weight: 700;
  }
  .badge.up { background: rgba(45,212,168,0.12); color: #0fa17e; }
  .badge.down { background: rgba(255,107,107,0.12); color: var(--coral); }

  /* ========== Slide 1: è¡Œå‹•é‡ ========== */
  .s-activity {
    text-align: center;
  }
  .s-activity .big-number { color: var(--sky); }
  .activity-bars {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-top: 28px;
  }
  .activity-bar-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    width: 80px;
  }
  .activity-bar-track {
    width: 40px;
    height: 160px;
    background: rgba(0,0,0,0.04);
    border-radius: 20px;
    position: relative;
    overflow: hidden;
  }
  .activity-bar-fill {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    border-radius: 20px;
    transition: height 1.2s cubic-bezier(0.22, 1, 0.36, 1);
  }
  .activity-bar-name {
    font-size: 14px;
    font-weight: 700;
  }
  .activity-bar-pct {
    font-family: 'Inter', sans-serif;
    font-size: 18px;
    font-weight: 900;
  }

  /* ========== Slide 2: é¡§å®¢å¯¾å¿œæ¯”ç‡ï¼ˆå††ã‚°ãƒ©ãƒ•ï¼‰ ========== */
  .s-ratio {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 80px;
  }
  .ratio-ring-wrapper {
    position: relative;
    width: 380px;
    height: 380px;
  }
  .ratio-ring-wrapper svg {
    width: 100%;
    height: 100%;
    transform: rotate(-90deg);
  }
  .ratio-ring-center {
    position: absolute;
    inset: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }
  .ratio-ring-pct {
    font-family: 'Inter', sans-serif;
    font-size: 96px;
    font-weight: 900;
    letter-spacing: -4px;
    color: var(--mint);
  }
  .ratio-ring-label {
    font-size: 14px;
    color: var(--text-sub);
    font-weight: 600;
  }
  .ratio-details {
    display: flex;
    flex-direction: column;
    gap: 16px;
  }
  .ratio-detail-item {
    display: flex;
    align-items: center;
    gap: 12px;
  }
  .ratio-dot {
    width: 14px;
    height: 14px;
    border-radius: 50%;
    flex-shrink: 0;
  }
  .ratio-detail-label {
    font-size: 15px;
    color: var(--text-sub);
    width: 120px;
  }
  .ratio-detail-val {
    font-family: 'Inter', sans-serif;
    font-size: 28px;
    font-weight: 900;
  }

  /* ========== Slide 3: ææ¡ˆç·æ•° ========== */
  .s-proposals {
    text-align: center;
  }
  .s-proposals .big-number { color: var(--violet); }
  .proposals-chart-wrap {
    margin: 24px auto 0;
    width: min(90%, 800px);
    height: 200px;
  }
  .proposals-chart-wrap canvas {
    width: 100% !important;
    height: 100% !important;
  }

  /* ========== Slide 4: ææ¡ˆé‡‘é¡ ========== */
  .s-amount {
    text-align: center;
  }
  .s-amount .big-number { color: var(--coral); }
  .amount-breakdown {
    display: flex;
    justify-content: center;
    gap: 48px;
    margin-top: 32px;
  }
  .amount-item {
    text-align: center;
  }
  .amount-item-val {
    font-family: 'Inter', sans-serif;
    font-size: 48px;
    font-weight: 900;
    letter-spacing: -2px;
  }
  .amount-item-label {
    font-size: 16px;
    color: var(--text-sub);
    font-weight: 700;
    margin-top: 6px;
  }

  /* ========== Slide 5: ã‚°ãƒƒãƒ‰ãƒˆãƒ”ãƒƒã‚¯ ========== */
  .s-topics {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    height: 100%;
    justify-content: center;
  }
  .topics-heading {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 20px;
  }
  .topics-heading-icon {
    font-size: 36px;
    animation: wiggle 2s infinite;
  }
  @keyframes wiggle {
    0%, 100% { transform: rotate(0); }
    25% { transform: rotate(-10deg); }
    75% { transform: rotate(10deg); }
  }
  .topics-heading-text {
    font-family: 'Inter', sans-serif;
    font-size: 28px;
    font-weight: 900;
    letter-spacing: -0.5px;
  }

  .topic-ticker {
    position: relative;
    width: min(90%, 900px);
    height: 300px;
    overflow: hidden;
  }
  .topic-item {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    gap: 32px;
    background: var(--card);
    border-radius: var(--radius);
    padding: 40px 48px;
    box-shadow: var(--shadow);
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.5s ease, transform 0.5s ease;
  }
  .topic-item.active {
    opacity: 1;
    transform: translateY(0);
  }
  .topic-emoji {
    font-size: 64px;
    flex-shrink: 0;
  }
  .topic-body {
    flex: 1;
  }
  .topic-type-badge {
    display: inline-block;
    padding: 4px 14px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 10px;
  }
  .topic-text {
    font-size: 24px;
    font-weight: 800;
    line-height: 1.4;
  }
  .topic-detail {
    font-size: 15px;
    color: var(--text-sub);
    margin-top: 6px;
  }
  .topic-amount-val {
    font-family: 'Inter', sans-serif;
    font-size: 32px;
    font-weight: 900;
    margin-top: 10px;
  }

  /* ========== èƒŒæ™¯è£…é£¾ ========== */
  .deco {
    position: fixed;
    border-radius: 50%;
    opacity: 0.08;
    pointer-events: none;
    z-index: 0;
  }
  .deco-1 {
    width: 600px; height: 600px;
    background: var(--coral);
    top: -200px; right: -100px;
  }
  .deco-2 {
    width: 400px; height: 400px;
    background: var(--sky);
    bottom: -100px; left: -100px;
  }
  .deco-3 {
    width: 300px; height: 300px;
    background: var(--amber);
    bottom: 100px; right: 200px;
  }
  .header, .main { position: relative; z-index: 1; }

  /* ========== é€²æ—ãƒãƒ¼ï¼ˆã‚¹ãƒ©ã‚¤ãƒ‰ã‚¿ã‚¤ãƒãƒ¼ï¼‰ ========== */
  .slide-progress {
    height: 3px;
    background: rgba(0,0,0,0.06);
    border-radius: 2px;
    overflow: hidden;
    margin-bottom: 2px;
  }
  .slide-progress-bar {
    height: 100%;
    background: linear-gradient(90deg, var(--coral), var(--pink));
    border-radius: 2px;
    width: 0%;
    transition: width 0.3s linear;
  }
  .slide-progress-bar.running {
    transition: width 10s linear;
    width: 100%;
  }
</style>
</head>
<body>

<!-- èƒŒæ™¯è£…é£¾ -->
<div class="deco deco-1"></div>
<div class="deco deco-2"></div>
<div class="deco deco-3"></div>

<!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
<header class="header">
  <div class="header-left">
    <div class="header-logo"><span>S</span>SALES DASHBOARD</div>
  </div>
  <div class="header-date" id="headerDate"></div>
  <div class="header-clock" id="headerClock"></div>
</header>

<!-- ãƒ¡ã‚¤ãƒ³ -->
<main class="main">
  <div class="slide-progress">
    <div class="slide-progress-bar" id="progressBar"></div>
  </div>

  <div class="slide-container">

    <!-- Slide 1: é¡§å®¢å¯¾å¿œæ™‚é–“ -->
    <div class="slide active" id="slide0">
      <div class="s-activity">
        <div class="slide-label">CUSTOMER HOURS TODAY</div>
        <div class="big-number huge" id="activityNum" style="color: var(--sky);">0<span class="big-unit">æ™‚é–“</span></div>
        <div class="big-sub">æœ¬æ—¥ã®ãƒãƒ¼ãƒ é¡§å®¢å¯¾å¿œæ™‚é–“ï¼ˆå–¶æ¥­æ™‚é–“ã® 78%ï¼‰</div>
        <div style="margin-top: 8px;">
          <span class="badge up">â–² 12% å…ˆé€±æ¯”</span>
        </div>
        <div class="activity-bars" id="activityBars"></div>
      </div>
    </div>

    <!-- Slide 2: é¡§å®¢å¯¾å¿œæ¯”ç‡ -->
    <div class="slide" id="slide1">
      <div class="s-ratio">
        <div>
          <div class="slide-label" style="margin-bottom: 12px;">CUSTOMER TIME RATIO</div>
          <div style="font-size: 20px; font-weight: 700; margin-bottom: 4px;">ãƒãƒ¼ãƒ å¹³å‡</div>
          <div class="big-sub">å–¶æ¥­æ™‚é–“ã«å ã‚ã‚‹é¡§å®¢å¯¾å¿œã®å‰²åˆ</div>
          <div class="ratio-details" style="margin-top: 24px;">
            <div class="ratio-detail-item">
              <div class="ratio-dot" style="background: var(--mint);"></div>
              <div class="ratio-detail-label">é¡§å®¢å¯¾å¿œ</div>
              <div class="ratio-detail-val" style="color: var(--mint);">78%</div>
            </div>
            <div class="ratio-detail-item">
              <div class="ratio-dot" style="background: #e0e0e0;"></div>
              <div class="ratio-detail-label">ç¤¾å†…æ¥­å‹™</div>
              <div class="ratio-detail-val">14%</div>
            </div>
            <div class="ratio-detail-item">
              <div class="ratio-dot" style="background: var(--amber);"></div>
              <div class="ratio-detail-label">ç§»å‹•ãƒ»ãã®ä»–</div>
              <div class="ratio-detail-val" style="color: var(--amber);">8%</div>
            </div>
          </div>
        </div>
        <div class="ratio-ring-wrapper">
          <svg viewBox="0 0 320 320">
            <circle cx="160" cy="160" r="140" fill="none" stroke="#f0ebe6" stroke-width="24"/>
            <circle cx="160" cy="160" r="140" fill="none" stroke="var(--amber)" stroke-width="24"
              stroke-dasharray="880" stroke-dashoffset="0" stroke-linecap="round" />
            <circle cx="160" cy="160" r="140" fill="none" stroke="#e0e0e0" stroke-width="24"
              stroke-dasharray="880" stroke-dashoffset="70.4" stroke-linecap="round" />
            <circle cx="160" cy="160" r="140" fill="none" stroke="var(--mint)" stroke-width="24"
              stroke-dasharray="880" id="ratioArc"
              stroke-dashoffset="193.6" stroke-linecap="round" />
          </svg>
          <div class="ratio-ring-center">
            <div class="ratio-ring-pct" id="ratioPct">0%</div>
            <div class="ratio-ring-label">é¡§å®¢å¯¾å¿œç‡</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Slide 3: ææ¡ˆç·æ•° -->
    <div class="slide" id="slide2">
      <div class="s-proposals">
        <div class="slide-label">PROPOSALS THIS MONTH</div>
        <div class="big-number huge" id="proposalNum" style="color: var(--violet);">0<span class="big-unit">ä»¶</span></div>
        <div class="big-sub">ä»Šæœˆã®ææ¡ˆæ•° ï¼ ç›®æ¨™ 50ä»¶</div>
        <div style="margin-top: 8px;">
          <span class="badge up">â–² 15% å…ˆæœˆæ¯”</span>
        </div>
        <div class="proposals-chart-wrap">
          <canvas id="chartProposals"></canvas>
        </div>
      </div>
    </div>

    <!-- Slide 4: ææ¡ˆç·é¡ -->
    <div class="slide" id="slide3">
      <div class="s-amount">
        <div class="slide-label">TOTAL PIPELINE</div>
        <div class="big-number huge" id="amountNum" style="color: var(--coral);">Â¥0<span class="big-unit">ä¸‡</span></div>
        <div class="big-sub">ä»Šæœˆã®ææ¡ˆç·é¡ï¼ˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ï¼‰</div>
        <div style="margin-top: 8px;">
          <span class="badge up">â–² 22% å…ˆæœˆæ¯”</span>
        </div>
        <div class="amount-breakdown">
          <div class="amount-item">
            <div class="amount-item-val" style="color: var(--mint);">Â¥4,860<span style="font-size:18px;">ä¸‡</span></div>
            <div class="amount-item-label">å—æ³¨æ¸ˆã¿</div>
          </div>
          <div class="amount-item">
            <div class="amount-item-val" style="color: var(--amber);">Â¥3,200<span style="font-size:18px;">ä¸‡</span></div>
            <div class="amount-item-label">å•†è«‡ä¸­</div>
          </div>
          <div class="amount-item">
            <div class="amount-item-val" style="color: var(--sky);">Â¥1,540<span style="font-size:18px;">ä¸‡</span></div>
            <div class="amount-item-label">ææ¡ˆæ¸ˆã¿</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Slide 5: ã‚°ãƒƒãƒ‰ãƒˆãƒ”ãƒƒã‚¯ -->
    <div class="slide" id="slide4">
      <div class="s-topics">
        <div class="topics-heading">
          <div class="topics-heading-icon">ğŸ‰</div>
          <div class="topics-heading-text">TODAY'S GOOD TOPICS</div>
        </div>
        <div class="topic-ticker" id="topicTicker"></div>
      </div>
    </div>

  </div>

  <!-- ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ -->
  <div class="slide-indicators" id="indicators"></div>
</main>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
<script>
// ==================== ãƒ‡ãƒ¼ã‚¿ ====================
const MEMBERS = [
  { name: 'ç”°ä¸­', hours: 5.8, pct: 72, color: '#4da6ff' },
  { name: 'ä½è—¤', hours: 6.8, pct: 85, color: '#2dd4a8' },
  { name: 'éˆ´æœ¨', hours: 5.1, pct: 64, color: '#f59e0b' },
  { name: 'å±±ç”°', hours: 7.3, pct: 91, color: '#8b5cf6' },
  { name: 'ä¼Šè—¤', hours: 6.2, pct: 78, color: '#ec4899' },
];

const TOPICS = [
  { type: 'å—æ³¨', emoji: 'ğŸ¯', color: '#ff6b6b', bg: 'rgba(255,107,107,0.1)',
    text: 'æ ªå¼ä¼šç¤¾ABC â€” å¹´é–“å¥‘ç´„å—æ³¨ï¼',
    detail: 'æ‹…å½“: å±±ç”° ï¼ SaaSãƒ—ãƒ©ãƒ³ãƒ»ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ',
    amount: 'Â¥3,600,000' },
  { type: 'å¤§å‹å•†è«‡', emoji: 'ğŸ’', color: '#8b5cf6', bg: 'rgba(139,92,246,0.1)',
    text: 'DEF Holdings â€” æœ€çµ‚ææ¡ˆå®Œäº†',
    detail: 'æ‹…å½“: ä½è—¤ ï¼ æ¥é€±ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ³ã‚°äºˆå®š',
    amount: 'Â¥12,000,000' },
  { type: 'æ–°è¦é–‹æ‹“', emoji: 'ğŸš€', color: '#2dd4a8', bg: 'rgba(45,212,168,0.1)',
    text: 'æ–°è¦ãƒªãƒ¼ãƒ‰ 15ä»¶ç²å¾—ï¼',
    detail: 'å±•ç¤ºä¼šãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ— ï¼ æ‹…å½“: ç”°ä¸­',
    amount: '' },
  { type: 'ã‚¢ãƒƒãƒ—ã‚»ãƒ«', emoji: 'ğŸ“ˆ', color: '#f59e0b', bg: 'rgba(245,158,11,0.1)',
    text: 'GHI Corp â€” ãƒ—ãƒ©ãƒ³å¤‰æ›´æˆç´„',
    detail: 'æ‹…å½“: ä¼Šè—¤ ï¼ ãƒ™ãƒ¼ã‚·ãƒƒã‚¯â†’ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ',
    amount: 'Â¥960,000/å¹´ å¢—é¡' },
];

const SLIDE_DURATION = 10000; // 10ç§’
const totalSlides = 5;
let currentSlide = 0;
let autoTimer;

// ==================== æ™‚è¨ˆ ====================
function updateClock() {
  const now = new Date();
  const h = String(now.getHours()).padStart(2, '0');
  const m = String(now.getMinutes()).padStart(2, '0');
  const s = String(now.getSeconds()).padStart(2, '0');
  document.getElementById('headerClock').textContent = `${h}:${m}:${s}`;
  const days = ['æ—¥','æœˆ','ç«','æ°´','æœ¨','é‡‘','åœŸ'];
  document.getElementById('headerDate').textContent =
    `${now.getFullYear()}å¹´${now.getMonth()+1}æœˆ${now.getDate()}æ—¥ï¼ˆ${days[now.getDay()]}ï¼‰`;
}
setInterval(updateClock, 1000);
updateClock();

// ==================== ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ç”Ÿæˆ ====================
const indicatorsEl = document.getElementById('indicators');
for (let i = 0; i < totalSlides; i++) {
  const d = document.createElement('div');
  d.className = 'indicator' + (i === 0 ? ' active' : '');
  d.onclick = () => goToSlide(i);
  indicatorsEl.appendChild(d);
}

// ==================== ã‚¹ãƒ©ã‚¤ãƒ‰åˆ¶å¾¡ ====================
function startProgress() {
  const bar = document.getElementById('progressBar');
  bar.classList.remove('running');
  bar.style.width = '0%';
  // force reflow
  void bar.offsetWidth;
  bar.style.transition = `width ${SLIDE_DURATION / 1000}s linear`;
  bar.classList.add('running');
}

function goToSlide(idx) {
  document.querySelectorAll('.slide').forEach((s, i) => s.classList.toggle('active', i === idx));
  document.querySelectorAll('.indicator').forEach((d, i) => d.classList.toggle('active', i === idx));
  currentSlide = idx;
  startProgress();
  resetAutoSlide();
  // ãƒˆãƒ”ãƒƒã‚¯ã‚¹ãƒ©ã‚¤ãƒ‰ã®ãƒ†ã‚£ãƒƒã‚«ãƒ¼ãƒªã‚»ãƒƒãƒˆ
  if (idx === 4) { currentTopic = 0; showTopic(0); resetTopicTimer(); }
}

function nextSlide() {
  goToSlide((currentSlide + 1) % totalSlides);
}

function resetAutoSlide() {
  clearInterval(autoTimer);
  autoTimer = setInterval(nextSlide, SLIDE_DURATION);
}

// åˆæœŸåŒ–
resetAutoSlide();
startProgress();

document.addEventListener('keydown', (e) => {
  if (e.key === 'ArrowRight') nextSlide();
  if (e.key === 'ArrowLeft') goToSlide((currentSlide - 1 + totalSlides) % totalSlides);
});

// ==================== ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ ====================
function animateValue(el, target, prefix = '', suffix = '', duration = 1200) {
  let start = 0;
  const step = (ts) => {
    if (!start) start = ts;
    const progress = Math.min((ts - start) / duration, 1);
    const eased = 1 - Math.pow(1 - progress, 3);
    const val = Math.floor(eased * target);
    el.innerHTML = `${prefix}${val.toLocaleString()}<span class="big-unit">${suffix}</span>`;
    if (progress < 1) requestAnimationFrame(step);
  };
  requestAnimationFrame(step);
}

setTimeout(() => {
  // é¡§å®¢å¯¾å¿œæ™‚é–“: 31.2h â†’ "31.2" ã‚’å°æ•°ä»˜ãã§ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
  animateDecimal(document.getElementById('activityNum'), 31.2, 'æ™‚é–“', 'var(--sky)');
  animateValue(document.getElementById('proposalNum'), 38, '', 'ä»¶');
  animateValue(document.getElementById('amountNum'), 9600, 'Â¥', 'ä¸‡');
}, 400);

function animateDecimal(el, target, suffix, color) {
  let start = 0;
  const duration = 1500;
  const step = (ts) => {
    if (!start) start = ts;
    const progress = Math.min((ts - start) / duration, 1);
    const eased = 1 - Math.pow(1 - progress, 3);
    const val = (eased * target).toFixed(1);
    el.innerHTML = `${val}<span class="big-unit">${suffix}</span>`;
    if (progress < 1) requestAnimationFrame(step);
  };
  requestAnimationFrame(step);
}

// æ¯”ç‡ãƒªãƒ³ã‚°
setTimeout(() => {
  document.getElementById('ratioPct').textContent = '78%';
}, 600);

// ==================== è¡Œå‹•é‡ãƒãƒ¼ ====================
const barsEl = document.getElementById('activityBars');
MEMBERS.forEach((m, i) => {
  const item = document.createElement('div');
  item.className = 'activity-bar-item';
  item.innerHTML = `
    <div class="activity-bar-pct" style="color:${m.color}">${m.hours}h</div>
    <div class="activity-bar-track">
      <div class="activity-bar-fill" style="height:0%;background:${m.color};" id="bar${i}"></div>
    </div>
    <div class="activity-bar-name">${m.name}</div>
  `;
  barsEl.appendChild(item);
});
setTimeout(() => {
  MEMBERS.forEach((m, i) => {
    document.getElementById('bar' + i).style.height = m.pct + '%';
  });
}, 600);

// ==================== Chart: ææ¡ˆæ¨ç§» ====================
Chart.defaults.color = '#8b8b9e';
Chart.defaults.font.family = "'Inter', 'Noto Sans JP', sans-serif";

new Chart(document.getElementById('chartProposals'), {
  type: 'bar',
  data: {
    labels: ['9æœˆ','10æœˆ','11æœˆ','12æœˆ','1æœˆ','2æœˆ'],
    datasets: [{
      data: [28, 34, 31, 42, 45, 38],
      backgroundColor: [
        'rgba(139,92,246,0.18)','rgba(139,92,246,0.18)','rgba(139,92,246,0.18)',
        'rgba(139,92,246,0.18)','rgba(139,92,246,0.18)','rgba(139,92,246,0.6)'
      ],
      borderRadius: 12,
      borderSkipped: false,
      barThickness: 48,
    }]
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    scales: {
      x: { grid: { display: false }, border: { display: false } },
      y: { display: false }
    },
    plugins: {
      legend: { display: false },
      tooltip: { enabled: true }
    }
  }
});

// ==================== ã‚°ãƒƒãƒ‰ãƒˆãƒ”ãƒƒã‚¯ ãƒ†ã‚£ãƒƒã‚«ãƒ¼ ====================
const tickerEl = document.getElementById('topicTicker');
TOPICS.forEach((t, i) => {
  const div = document.createElement('div');
  div.className = 'topic-item' + (i === 0 ? ' active' : '');
  div.innerHTML = `
    <div class="topic-emoji">${t.emoji}</div>
    <div class="topic-body">
      <div class="topic-type-badge" style="background:${t.bg};color:${t.color};">${t.type}</div>
      <div class="topic-text">${t.text}</div>
      <div class="topic-detail">${t.detail}</div>
      ${t.amount ? `<div class="topic-amount-val" style="color:${t.color};">${t.amount}</div>` : ''}
    </div>
  `;
  tickerEl.appendChild(div);
});

let currentTopic = 0;
let topicTimer;

function showTopic(idx) {
  document.querySelectorAll('.topic-item').forEach((el, i) => el.classList.toggle('active', i === idx));
  currentTopic = idx;
}

function nextTopic() {
  showTopic((currentTopic + 1) % TOPICS.length);
}

function resetTopicTimer() {
  clearInterval(topicTimer);
  topicTimer = setInterval(nextTopic, 3500);
}
resetTopicTimer();
</script>
</body>
</html>
